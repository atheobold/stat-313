<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>üë©‚Äçüî¨ Inference for Linear Regression</title>
    <meta charset="utf-8" />
    <meta name="date" content="2021-02-19" />
    <script src="libs/header-attrs-2.7/header-attrs.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="slide-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# üë©‚Äçüî¨ Inference for Linear Regression
### February 19, 2021

---




.huge-text[you...]

.large[
- know about p-values
- know about confidence intervals
- know about linear regression 
- understand sampling variability
- are interested in using tools for statistical inference
]

---

class: middle

.larger[Evals Data]

These data contain observations on 463 courses at the University of Texas 
Austin, with 23 variables recorded in the data:

- information about the course
- information about the professor
- information about number of students 
- information about the "attractiveness" rating of the professor

Data from the 94 unique professors were randomly sampled, so that each row in the 
dataset corresponds to one course taught by that professor. 


---

.large[Linear Regression]

We can model the relationship between a professor's evaluation score (`score`)
and their average attractiveness score (`age`) with a simple linear 
regression!

- Scores for average beauty can range from 0 to 10
- Ages range from 29 to 73, with a median of 47

&lt;img src="regression_inference_new_files/figure-html/slr-viz-1.png" style="display: block; margin: auto;" /&gt;

---

.large[Fitting a Model] 


```r
slr &lt;- lm(score ~ age, data = evals) 
get_regression_table(slr) 
```

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p_value &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; intercept &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.462 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.127 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.195 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.213 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.711 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; age &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.006 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.003 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2.311 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.021 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.011 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.001 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


$$
\widehat{\text{eval}} = 4.46 -0.006 \cdot \text{age}
$$
&lt;center&gt; 

__How would we interpret the slope on `age`?__ 

__What parameter is this an estimate of?__ 


---

.large[SE and Sampling Variability] 

.pull-left[
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.462 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.127 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; -0.006 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.003 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- The standard error is the standard deviation of a point estimate calculated
from the sample. 

- A slope of -0.006 is just one possible value of the fitted slope. 
]

.pull-right[
- A different sample of 94 professors we would almost certainly have a different fitted slope. 

- The variability of the sampling distribution is also called the standard error! 
  * The standard error quantifies how much variation we would expect between different samples.
]

---

.large[Confidence Intervals]  

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.462 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.127 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.213 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.711 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; -0.006 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.003 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.011 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.001 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;/br&gt;

A confidence interval of (-0.011, -0.001) is a range of plausible values for `\(\beta_1\)`. 

&lt;/br&gt; 
&lt;center&gt; 
__How do we interpret this confidence interval?__ 

---

.hand[Q: How did `R` find the endpoints for the confidence interval?]


- `R` uses theory-based methods to acquire confidence intervals. 

- Assuming that the sampling distribution is bellshaped, we can calculate a 95% 
confidence interval as: 

&lt;center&gt; 
`\(b_1 \pm t^* \cdot \text{SE}_{b_1} = -0.006 \pm 1.660881 \cdot 0.003 = (-0.01098, -0.00102)\)`
&lt;/center&gt;

.pull-left[
.small[*Check*:]
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.213 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.711 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; -0.011 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.001 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

---

.large[Connection to Bootstrapping] 

- Bootstrapping re-samples from the original sample to see what other possible 
samples could have looked like. 

  * Each of these re-samples gives us a better idea of the true sampling variability 
  
&lt;/br&gt; 

__What is the key assumption about the original sample when bootstrapping?__ 

&lt;/br&gt;

- Bootstrapping with replacement is done row-by-row, so the original pairs of
`score` and `age` are always kept together.

---

.large[Finding Bootstrap Statistics] 

.pull-left[

```r
bootstrap_slope &lt;- evals_small %&gt;% 
```

&lt;/br&gt; 


```r
specify(formula = score ~ age) %&gt;%
```



```r
generate(reps = 1000, 
           type = "bootstrap") %&gt;% 
```

&lt;/br&gt;


```r
calculate(stat = "slope")
```
] 

.pull-right[
Step 1 (and 5): Take dataset and pipe it into the `infer` pipeline

Step 2: `specify` the response and explanatory variables

Step 3: `generate` simulated statistics -- here bootstrap resamples

Step 4: `calculate` the statistic of interest -- here the slope

]

---

.large[Visualizing &amp; Calculating a Confidence Interval]

.pull-left[
.midi[**Visualizing**]


```r
bootstrap_slope %&gt;% 
  visualise() 
```

![](regression_inference_new_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;
]

.pull-right[
.midi[**Calculating**]


```r
get_confidence_interval(bootstrap_slope, level = 0.95)
```


```
## # A tibble: 1 x 2
##   lower_ci upper_ci
##      &lt;dbl&gt;    &lt;dbl&gt;
## 1  -0.0146  0.00933
```

`-0.146` to `0.00933`
]

---

class: middle

.large[Comparison of CI Methods]

.pull-left[
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Percentile &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.0146123 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0093277 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; SE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.0146629 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0098656 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; t-based &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.0110000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.0010000 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[
![](regression_inference_new_files/figure-html/unnamed-chunk-14-1.png)&lt;!-- --&gt;
] 


---

.large[Confidence Intervals &amp; Hypothesis Tests] 

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lower_ci &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; upper_ci &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Percentile &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.0146123 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0093277 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; SE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.0146629 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0098656 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; t-based &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.0110000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.0010000 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- A confidence provides a range of plausible values for the population parameter, 
here `\(\beta_1.\)` 

  * If the null value is contained in the interval, then 0 is 
a plausible value for `\(\beta_1.\)` 

&lt;center&gt; 

__What would you conclude for your hypothesis test?__ 

---

.large[Hypothesis Testing for the Slope]

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; estimate &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_error &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p_value &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; intercept &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.462 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.127 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.195 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.000 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; age &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -0.006 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.003 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2.311 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.021 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;/br&gt;

The statistic on the regression table tests between the hypotheses: 

&lt;center&gt; 

`\(H_0: \beta_1 = 0\)` 

`\(H_A: \beta_1 \neq 0\)`

---

.large[Test Statistic]

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; term &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; statistic &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; p_value &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; age &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -2.311 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.021 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

- The statistic on the regression table is a `\(t\)`-statistic, calculated according
to the formula in the book. 

- To compute the p-value, `R` compares the test statistic of -2.31 to the
appropriate null distribution.

  * It can be mathematically proven that the null distribution of this statistic 
  is a  `\(t\)`-distribution
  
  * The distribution has degrees of freedom equal to `\(n - 2 = 94 - 2\)`.  

---

.large[Let's Try Simulation Instead] 

.pull-left[

```r
null_slope &lt;- evals_small %&gt;% 
```

&lt;/br&gt;


```r
specify(formula = score ~ age) %&gt;%
```


```r
hypothesize(null = "independence") %&gt;% 
```

&lt;/br&gt;


```r
generate(reps = 1000, 
           type = "bootstrap") %&gt;% 
```


```r
calculate(stat = "slope")
```
] 

.pull-right[
Step 1 (and 6): Take dataset and pipe it into the `infer` pipeline

Step 2: `specify` the response and explanatory variables

Step 3: `hypothesize` what would be true under the null hypothesis

Step 4: `generate` simulated statistics -- here bootstrap resamples

Step 5: `calculate` the statistic of interest -- here the slope

]

---

.large[Calculating a p-value]

.pull-left[
![](regression_inference_new_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;

```
## [1] 0.98
```
]

.pull-right[
- What would you conclude for your hypothesis test? 

- Using a `\(t\)`-distribution gets a p-value of 0.021. Why the difference? 
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-light",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
