---
title: "Lab 4: Confidence Intervals and OkCupid -- Key"
author: "By: Dr. Theobold"
output: html_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE, 
                      warning = FALSE)

library(tidyverse)
library(infer)
library(here)
```

## Reading in the Data

__1. Insert the path to read in the dataset!__ 

```{r data}
# Insert the path from the here() function that directs you to the dataset!
profiles <- read_csv(here("Week 7 - Confidence Intervals", "Lab", 
                          "data", "profiles_revised.csv"))
```

__Either full credit or a redo.__ 

Redo if path is not specified with `here()` function!


## Filtering Data

__2. Write the code to filter the `profiles` dataset, so it only contains observations that meet the following criteria:__ 

- identify as male ("m")
- identify as "average" or "athletic"

```{r filtering}

profiles_final <- profiles %>% 
  filter(sex == "m", 
         body_type %in% c("average", "athletic"))

```

__4__

Write correct `filter()` statements

__3__

Write two separate `filter()` statements

__Redo__

If they miss or have an incorrect filter

</br>

## Visualizing Relationships

__3. Create faceted histograms of the distribution of self-reported heights between these two body types.__ 

```{r faceted-histogram}

profiles_final %>% 
  ggplot(aes(x = height)) + 
  geom_histogram(binwidth = 1) + 
  facet_wrap(~body_type)
  
```

__4__

For code given above. 

_Consider giving comments on code "readability"._ 

__Redo__

If do not use faceting. 
If do not use histograms.

</br> 

__4. Do you believe there is a difference in self-reported height between the two body types? Why or why not? Base your argument on the plot above!__
<!-- Your response to this question goes below this line! -->

*The distributions look about the same! The have nearly the same center, somewhere around 74 inches and roughly similar spread. It appears the there are more people who reported unusually tall heights in the athletic group than the average group.* 

__4__

- Argument states that the distributions appear to have the same center. 
- Argument states that the distributions appear to have similar spread.

__Redo__

- Argument talks about either center or spread, but not both. 
- Argument suggests the distributions are different.

</br> 

## Bootstrap Distribution

__5. Generate a bootstrap distribution of differences in means from 1000 bootstrap resamples.__

```{r boot-dist, cache = TRUE}
boot_dist <- profiles_final %>% 
  specify(response = height, explanatory = body_type) %>% 
  generate(reps = 500, type = "bootstrap") %>% 
  calculate(stat = "diff in means")
```

__4__

For code above. 

__Redo__

If code is missing any components.  
_Note:_ I said it was okay to have 500 reps instead of 1000. 

</br> 

__6. Use the `visualize()` function to create a simple histogram of your 1000 bootstrap statistics.__

```{r}
# Code to visualize bootstrap statistics

visualise(boot_dist)

# OR 

boot_dist %>% 
  ggplot(mapping = aes(x = stat)) + 
  geom_histogram()

```

__4__ 

For using the `visualize()` function *or* using `ggplot()` with
`geom_histogram()`

__Redo__

If do not use either of these methods. 

</br>

## Confidence Interval 

__7. Use the `get_confidence_interval()` function to find the 80% confidence interval from your bootstrap distribution. Be sure to use the percentile method!__

```{r confidence-interval}
get_confidence_interval(boot_dist, level = 0.80, type = "percentile")
```

__4__

For code above.

__3__

If use `level = 0.95`. 

__Redo__

If use `type = "se"`

</br>

__8. Interpret the confidence interval you obtained in part 7. Make sure to include the context of the data!__
<!-- Your response to this question goes below this line! -->

*We are 80% confident that the true difference in mean self-reported height between athletic and average body types lies between 0.555 and 0.662, when taking athletic - average.*

__4__

Has all of the following components:

- States 80% confidence
- States the parameter of interest (difference in mean self-reported height
between athletic and average body types)
- States the range of values found above
- States the order of subtraction (athletic - average)

__3__

Has all of the above components *except* for the order of subtraction.  

__Redo__

Otherwise

</br>

## Bootstrap Assumptions

__9. Based on the information given, how do you feel about the assumption a bootstrap distribution makes about the original sample? What issues do you believe might prevent this assumption being appropriate?)__
<!-- Your response to this question goes below this line! -->

*These data are not a random sample of OkCupid users. They are a convenience sample, taken by scraping profile information from OkCupid. Moreover, they are only for users with profile pictures, who had been online in the previous year, and who lived within 25 miles of San Francisco.*

*Because of the nature of how the data were collected, there are a variety of ways the sample could be biased. For example, this sample doesn't include users without profile pictures or who hadn't been online in over a year. These biases make it so that I wouldn't feel comfortable saying that this sample is "representative" of some broader population, even if that population is OkCupid users who lived by San Francisco in the 2010s.* 

__4__

The statement should say that the bootstrap assumption about the sample being
representative of the population is not valid. The statement should include the
following information: 

- This was a non-random sample
- The sample is not representative of other OkCupid users

The statement should include *at least* one __reasonable__ issue that would 
bias this sample (e.g., scraping, profile picture, location, last online, etc.)

__Redo__

If missing any of the components