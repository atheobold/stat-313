---
title: "Week Four: Introduction to Linear Regression (Basic Regression)"
author: ""
output:
  prettydoc::html_pretty:
    theme: tactile
    highlight: github
    css: styles.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include = FALSE}
library(tidyverse)
library(gapminder)
library(flair)
library(emo)
library(openintro)
library(moderndive)
library(skimr)
library(gridExtra)
```


Welcome!

In this week's coursework we are going to start exploring statistical methods---linear regression. We will start with the "basic" case or simple linear regression, with a single quantitative explanatory variable and a quantitative response. We will review the concepts behind linear regression, learn how to visualize regression models, and practice obtaining the estimated regression lines in `R`. 

## Learning Outcomes 

By the end of this coursework you should be able to:

- describe the difference between explanatory and predictive modeling 
- produce data visualizations for a simple linear regression
- describe how `R` decides on the "best" regression line
- fit a simple linear regression in `R`
- write out an estimated regression line
- interpret the slope of an estimated regression line
- interpret the intercept of an estimated regression line
- describe what an "offset" is in a simple linear regression
- interpret the offsets of an estimated regression line
- calculate a residual for an observation

## This Week's TODOs

`r emo::ji("book")` Reading: 45-60 minutes 

`r emo::ji("scroll")` Group Discussion Homework: 8 Questions  

**Note:** These questions will be due on Thursday by 8pm 

`r emo::ji("check")` Check-ins: 1 (submit on Canvas)

---

# Basic Regression  

`r emo::ji("book")` [**Required Reading:** *Modern Dive*, Basic Regression](https://moderndive.com/5-regression.html)

**Note:** This is a different textbook than we have used the last two weeks! 

**Don't worry about Section 3.3.3**, it goes a bit too in the weeds for what we are interested in. 

---

`r emo::ji("scroll")` Group Concept Questions 

1.	What are two types of data modeling? What purpose does each serve? What type of data modeling have you seen before? 

2.	The plot below suffers from what we call "overplotting". Describe what overplotting is and how it can be remedied. 

```{r, echo = FALSE}
ggplot(evals, aes(x = bty_avg, y = score)) +
  geom_point() +
  labs(x = "Beauty Score", 
       y = "Teaching Score",
       title = "Scatterplot of relationship of teaching and beauty scores")
```

 
3. Below is a plot of the relationship between the age of the professor and their teaching evaluations. 
Describe the relationship you see.
Does the relationship between age and evaluation scores appear to be stronger or weaker than the relationship with beauty scores? 

```{r, echo = FALSE}
ggplot(evals, aes(x = age, y = score)) +
  geom_jitter() +
  labs(x = "Age of Professor", 
       y = "Teaching Score",
       title = "Scatterplot of relationship of teaching scores and age")
```

4. Below is a regression table for the linear regression model of evaluation score as a function of the age of professor.
Use the regression table to write out the estimated regression line for this relationship. 

```{r, echo = FALSE}
age_lm <- lm(age ~ score, data = evals) 
get_regression_table(age_lm)
```

5. Below is information on one professor from the `evals` dataset.
Compute the residual for this professor based on the regression line you found in #4. 

```{r, echo = FALSE}
evals %>% 
  select(ID, score, age, bty_avg) %>% 
  sample_n(size = 1)
```

6. What does the term "offset" mean in a linear regression with a categorical explanatory variable? 

7. The `evals` data has a variable named `ethnicity` with levels `"minority"` and `"not minority"`. 
Using the table below, write down the estimated mean evaluation score for professors of these two different ethnicity groups. 

```{r, echo = FALSE}
ethnic_lm <- lm(score ~ ethnicity, data = evals)
get_regression_table(ethnic_lm)
```

8. What procedure / criteria does `R` use to decide what constitutes the "best" regression line?
How would you describe this procedure to someone? 

---

`r emo::ji("check")` **Check-in: Basic Linear Regression**

1. What does the correlation coefficient measure?

- strength of a relationship between two variables
- strength of a linear relationship between two variables
- strength of a relationship between two numerical variables 
- strength of a linear relationship between two numerical variables

2. How do you interpret a slope coefficient?

- For any increase of $x$, the slope is the expected increase in $y$
- For any increase of $x$, the slope is the expected increase in the mean of $y$
- For a 1-unit increase in $x$, the slope is the expected increase in $y$
- For a 1-unit increase in $x$, the slope is the expected increase in the mean of $y$

3. How do you interpret an intercept coefficient?

- For a 1-unit increase in $x$, the intercept is the expected increase in $y$
- For a 1-unit increase in $x$, the intercept is the expected increase in the mean of $y$
- For an $x$ value of 0, the intercept is the expected value of $y$
- For an $x$ value of 0, the intercept is the expected value of the mean of $y$ 

4. Match the explanatory and response variables to the correct location in the "formula" syntax. 

[explanatory / response] `~` [explanatory / response]

5. What `geom_` adds a linear regression line to a scatterplot? 

- `geom_line()`
- `geom_smoother()`
- `geom_regression()`
- `geom_smooth()`

6. Match the following equations to either (1) the population regression equation or (2) the estimated / sample regression equation. 
$$\hat{y} = \beta_0 + \beta_1 x$$  

$$\hat{y} = b_0 + b_1 x$$  

---

# Review from Last Week

## Think Out Loud Recording

Record your response to this week's think out loud prompt, exploring a key concept from the content covered during Week 3. You will be limited to 2 minutes and 30 seconds, to give you an idea of about how long you will have to describe your thinking in an oral exam. 

**Prompt:** 

Describe to someone two visualizations that can be used to visualize a *single* quantitative variable. Your description should include:

- a summary of what each plot looks like
- a description of when each plot should / should not be used
- *at least one* strength and one weakness of each plot
