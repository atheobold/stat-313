---
title: "Week Three: Summarizing & Visualizing Numerical Data"
author: ""
output:
  prettydoc::html_pretty:
    theme: tactile
    highlight: github
    css: styles.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include = FALSE}
library(tidyverse)
library(gapminder)
library(flair)
library(emo)
library(openintro)
library(unvotes)
library(lubridate)
library(DT)
library(gridExtra)
```


Welcome!

In this week's coursework we are going to continuing exploring data, through 
data summaries and visualizations, focusing specifically on **numerical**
variables. We will be using the **dplyr** package in `R` to wrangle our data 
and the **ggplot2** package to created data visualizations. 


## Learning Outcomes 

By the end of this coursework you should be able to:

- outline the differences between numerical and categorical variables
- describe what type of summary statistic is appropriate for a given  
distribution of a numerical variable  
- discuss when it is / is not appropriate to summarize a variable with a mean  
- create visualizations of one and two numerical variables  
- discuss the benefits and shortcomings of different visualizations 


## This Week's TODOs

`r emo::ji("book")` Reading: 30-45 minutes 

`r emo::ji("computer")` Tutorials: 60-75 minutes 

`r emo::ji("check")` Check-ins: 2 (submit on Canvas)

`r emo::ji("scroll")` Group Discussion Homework: 3 Questions

---

# Exploring Numerical Data 

`r emo::ji("book")` [**Required Reading:** Exploring Numerical Data](https://openintro-ims.netlify.app/explore-numerical.html)

`r emo::ji("computer")` [**Required Tutorial:** Summarizing with Statistics](https://openintro.shinyapps.io/ims-02-explore-03/)


`r emo::ji("computer")` [**Required Tutorial:** Exploring Numerical Data](https://openintro.shinyapps.io/ims-02-explore-02/)


If you are feeling like you would like to see additional materials on
wrangling data and creating data visualizations in `R`, the *Modern Dive* 
textbook has two excellent chapters you can reference. 

`r emo::ji("book")` [**Supplementary Reading:** Data Visualization](https://moderndive.com/2-viz.html)

`r emo::ji("book")` [**Supplementary Reading:** Data Visualization](https://moderndive.com/3-wrangling.html)

---

`r emo::ji("scroll")` Group Concept Questions 

1.	What are two benefits and two weaknesses of data summaries and data 
visualizations. 

| Representation      | Benefits | Weaknesses | 
|---------------------|----------|------------|
| Data Summaries      |          |            |
| Data Visualizations |          |            |
	

2.	Describe what you would need to do to replicate the following plot.

```{r, echo = FALSE}
nycflights %>%
  filter(carrier %in% c("AA", "UA", "DL")) %>% 
  ggplot(aes(x = dep_delay, y = arr_delay, color = carrier)) + 
  geom_point()
```

 
3.	What are two aspects of this plot that you believe are well done? What are 
two aspects of the plot that could be improved?  

---

`r emo::ji("check")` **Check-in: Summarizing with Statistics**


1. Suppose we have data on the departure delays of flights flying out of New
York. What shape would you expect the distribution of departure delays to have? 

- right skew
- left skew
- bimodal
- mutimodal
- uniform

2. With the flights dataset, we are interested in knowing which month passengers
could expect to have the highest average delay departing from an NYC airport. 

  What data wrangling functions would help you address this question? (select
  all that apply)

- `group_by()`
- `summarize()`
- `count()`
- `filter()`

3. To better decide what summary statistic we should use to summarize the
departure delays it would be best to create a data visualization of the
distribution of departure delays.

  What type of visualizations could we make? (select all that apply)

- boxplot
- histogram
- barplot
- density plot
- scatterplot

4. Finally, we would like to take into account what carrier each flight came
from to assess if the distribution of departure delays differs by carrier.

  What are ways you could modify your previous visualization to include the
  carrier variable?


---

`r emo::ji("check")` **Check-in: Visualizing Numerical Data**


1. What aesthetics are being used in the following plot?  

Hint: Think about what goes inside of the `aes()` function and what does not. 

```{r, echo = FALSE, message = FALSE, warning = FALSE, out.width = "70%", fig.align = 'center'}
un_votes %>%
  filter(country %in% c("United States", "Turkey")) %>%
  inner_join(un_roll_calls, by = "rcid") %>%
  inner_join(un_roll_call_issues, by = "rcid") %>%
  mutate(issue = as.character(issue),
         issue = if_else(issue == "Nuclear weapons and nuclear material",
                        "Nuclear weapons and materials", issue)) %>%
  group_by(country, year = year(date), issue) %>%
  summarize(
    votes = n(),
    percent_yes = mean(vote == "yes")
    ) %>%
  filter(votes > 5) %>%  # only use records where there are more than 5 votes
  ggplot(mapping = aes(x = year, y = percent_yes, color = country)) +
    geom_point() +
    geom_smooth(method = "loess", se = FALSE) +
    facet_wrap(~ issue) +
    labs(
      title = "Percentage of 'Yes' votes in the UN General Assembly",
      subtitle = "1946 to 2020",
      y = "% Yes",
      x = "Year",
      color = "Country"
    )
```

- `x` axis
- `y` axis
- `color` 
- `facet`s
- `fill`
- `point`s
- `line`s

2. What geometric objects are being used in the displayed visualization?  

Hint: Think about what `geom`s you would use to make this plot! 

- points
- lines / smoothers
- colors
- facets 

3. What aspects of the distribution of departure delays can you see in the 
histogram that you could not see in the boxplot?

```{r, echo = FALSE, message = FALSE, warning = FALSE}
p1 <- nycflights %>% 
  ggplot(mapping = aes(x = dep_delay)) + 
  geom_boxplot() + 
  labs(x = "Departure Delay (min)")

  
p2 <- nycflights %>% 
  ggplot(mapping = aes(x = dep_delay)) + 
  geom_histogram() + 
  labs(x = "Departure Delay (min)")

grid.arrange(p1, p2, nrow = 1)
   
```

- shape of distribution 
- median
- outliers
- mode

4. A histogram and a dotplot display similar information. What is the **one**
thing that differentiates a dotplot from a histogram?


---

# Review from Last Week

## Think Out Loud Recording

Record your response to this week's think out loud prompt, exploring a key
concept from the content covered during Week 2. You will be limited to 2 minutes
and 30 seconds, to give you an idea of about how long you will have to describe
your thinking in an oral exam. 

**Prompt:** 

1. Describe two similarities and two differences between stacked and filled (standardized) barplots.  

2. What type of comparisons is a filled barplot more appropriate for?